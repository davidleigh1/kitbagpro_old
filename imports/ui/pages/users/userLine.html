<template name="userLine">

{{#with thisUser}}
	<tr data-sortusername="{{toLower username}}" data-sortcallsign="{{toLower profile.userCallsign}}" data-sortdisplayname="{{toLower profile.displayName}}" data-sortcreated="{{createdAt}}" data-sortupdated="{{createdAt}}" data-sortorg="{{toLower (lookupFieldFromOrg profile.userAssocOrg 'orgTitle') }}"	class="{{#if isCurrentUser}}currentUser{{/if}}" id="{{profile.userId}}">

		<!-- Small screens only! -->
		<td class="visible-xs col-xs-3">
			<!-- Top line -->
			<a href="/users/{{userId}}/view">
			<div>
				{{#unless username}}
					<span class="resNote">Username not found (UserID: {{itemId}})</span>
				{{else}}
					<a href="/users/{{userId}}/view">{{highlight username filterVar suppressHightlight}}</a>
				{{/unless}}
			</div>
			<!-- /Top line -->
			<!-- Bottom line -->
			<div>
				<!-- {{#if itemAssocKitbagCount }}
						<span class="itemlistSubtitle">{{plural itemAssocKitbagCount "kitbag" "kitbags"}}</span>
				{{/if}} -->
			</div>
			<!-- /Bottom line -->
			</a>
		</td>
		<!-- /Small screens only! -->

		<td class="hidden-xs userProfileNameCol">
			{{#unless getDisplayName}}
				<span class="cursor-help" title="'userProfileName' not found">
					{{#if isCurrentUser}}[Current User]{{else}}-{{/if}}
				</span>
			{{else}}
				<a href="/users/{{profile.userId}}/view">
					{{highlight getDisplayName filterVar suppressHightlight}}
					{{#if isCurrentUser}} [Current User]{{/if}}
				</a>
			{{/unless}}
		</td>

		<!-- User Status Tag -->
		<td class="hidden-xs userStatusCol">
			<!-- {{#unless profile.userStatus}} -->
				<!-- <span class="cursor-help" title="'profile.userStatus' not found">-</span> -->
			<!-- {{else}} -->
				<span class="label {{getUserStatusTag.labelClass}}">{{getUserStatusTag.labelText}}</span>
			<!-- {{/unless}} -->
		</td>

		<td class="hidden-xs userCallsignCol">
			{{#unless profile.userCallsign}}
				<span class="cursor-help" title="'userCallsign' not found">-</span>
			{{else}}
				<a href="/users/{{profile.userId}}/view">{{highlight profile.userCallsign filterVar suppressHightlight}}</a>
			{{/unless}}
		</td>

		<td class="hidden-xs userlistDivisionCol">
			{{#unless profile.userDivision}}
				<span class="cursor-help" title="'profile.userDivision' not found">-</span>
			{{else}}
				{{profile.userDivision}}
			{{/unless}}
		</td>

		<td class="hidden-xs userlistTeamCol">
			{{#unless profile.userTeam}}
				<span class="cursor-help" title="'profile.userTeam' not found">-</span>
			{{else}}
				{{profile.userTeam}}
			{{/unless}}
		</td>

		<td class="hidden-xs userlistKitbagCountCol">
			{{#unless profile.userKitbagCount}}
				<span class="cursor-help" title="'profile.userKitbagCount' not found">-</span>
			{{else}}
				{{profile.userKitbagCount}}
			{{/unless}}
		</td>

		<td class="hidden-xs userlistSuperAdminCol">
			{{#unless getType.value}}
				<span class="cursor-help" title="'userType' not found">-</span>
			{{else}}
				{{getType.value}}
			{{/unless}}
		</td>


		{{#if glb_userIsSuperAdmin}}
			<!-- User Organisation -->
			<!-- NOTE: User Search/Filter also includes Associated Org ID - but not at this point, not the Org Title -->
			<td class="hidden-xs hidden-sm userOrgCol adminOnly">
				{{#unless profile.userAssocOrg}}
					<span class="cursor-help" title="'userAssocOrg' not found">-</span>
				{{else}}
					<a href="/orgs/{{profile.userAssocOrg}}/view">
					{{highlight (lookupFieldFromOrg profile.userAssocOrg 'orgTitle') filterVar suppressHightlight}}</a><br><small>({{highlight profile.userAssocOrg filterVar suppressHightlight}})</small>
				{{/unless}}
			</td>
		{{/if}}

		<!-- Username -->
		<td class="hidden-xs userNameCol">
			{{#unless username}}
				<span class="cursor-help" title="'username' not found">-</span>
			{{else}}
				<a href="/users/{{profile.userId}}/view">{{highlight username filterVar suppressHightlight}}</a>
			{{/unless}}
		</td>


		<!-- User Email -->
		<td class="hidden-xs hidden-sm userEmailCol">
			{{#unless getEmail}}
				<span class="cursor-help" title="'userEmail' not found">-</span>
			{{else}}
				{{highlight getEmail filterVar suppressHightlight}}
			{{/unless}}
		</td>

		<!-- User ID -->
		<td class="hidden-xs userIdCol">
			{{#unless getUserId}}
				<span class="cursor-help" title="'userId' not found">-</span>
			{{else}}
				<a href="/users/{{profile.userId}}/view" title="dbid: '{{_id}}'">{{highlight getUserId filterVar suppressHightlight}}</a>
			{{/unless}}
		</td>

		<!-- User ID -->
		{{#if glb_userIsSuperAdmin}}
			<td class="hidden-xs dbIdCol adminOnly">
				<span>{{_id}}</span>
			</td>
		{{/if}}

		<!-- Account Service -->
		<!--
		<td class="hidden-xs hidden-sm hidden-md userlistServiceCol">
			{{#unless userGetService 'serviceName'}}
				<span class="resNote">'serviceName' not found</span>
			{{else}}
				{{userGetService 'serviceName'}} ({{userGetService 'serviceUsername'}})
			{{/unless}}
		</td>
		-->

		<td class="hidden-xs hidden-sm hidden-md userlistCreatedAtCol"><!-- {{formatDate createdAt}} -->
			{{#unless createdAt}}
				<span class="resNote">N/A</span>
			{{else}}
				{{formatDate createdAt 'naa!'}}
			{{/unless}}
			{{#if profile.createdBy}}
				<span class="text-muted small adminOnly"><br/>by <a href="/users/{{profile.createdBy}}/view">{{lookupNameFromUserId profile.createdBy}}</a></span>
			{{/if}}
		</td>

		<td class="hidden-xs userlistActionsCol">
			<div class="controlWrapper">
				<!--
				{{#if glb_userIsSuperAdmin}}
					<a class="btn btn-xs btn-default" title="Password" href="#"><i class="fa fa-fw fa-key"></i> </a>
				{{/if}}
				-->
				<a class="btn btn-xs btn-default {{#unless getUserId}}disabled{{/unless}}" title="Edit" href="/users/{{getUserId}}/edit"><i class="fa fa-fw fa-edit"></i> </a>
				<a class="btn btn-xs btn-default {{#unless getUserId}}disabled{{/unless}}" title="View" href="/users/{{getUserId}}/view"><i class="fa fa-fw fa-eye"></i> </a>
				{{#if glb_userIsSuperAdmin}}
					<!-- Use _id in case UserId doesnt exist!! -->
					<a class="btn btn-xs btn-default" title="Trash" href="#"><i class="fa fa-fw fa-trash"></i> </a>
				{{/if}}
			</div>
		</td>

	</tr>
{{/with}}

</template>

<!-- =============================== -->
	<!-- <div class="userline userentry {{#if isCurrentUser}}currentUser{{/if}} "> -->
<!-- 		<span class="userlistProfileName">
			{{#unless userProfileName}}
				<span class="resNote">N/A</span>
			{{else}}
				{{userProfileName}}
			{{/unless}}
		</span> -->
<!-- 		<span class="userlistUsername">
			{{#unless username}}
				<span class="resNote">N/A</span>
			{{else}}
				{{username}}
			{{/unless}}
		</span> -->
		<!-- <span class="userlistId">{{profile.userId}} {{#if isCurrentUser}} [Current User]{{/if}}</span> -->
<!-- 		<span class="userlistEmail">
			{{#unless userEmail}}
				<span class="resNote">N/A</span>
			{{else}}
				{{userEmail}}
			{{/unless}}
		</span> -->
<!-- 		<span class="userlistService">
			{{#unless userGetService 'serviceName'}}
				<span class="resNote">None</span>
			{{else}}
				{{userGetService 'serviceName'}} ({{userGetService 'serviceUsername'}})
			{{/unless}}
		</span> -->
<!-- 		<span class="userlistCreatedAt">{{formatDate createdAt}}</span>
		<span class="userlistSuperAdmin">{{glb_userIsSuperAdmin}}</span> -->
	<!-- </div> -->
